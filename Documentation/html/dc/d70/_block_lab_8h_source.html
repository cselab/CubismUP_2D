<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>CubismUP_2D: Cubism/BlockLab.h Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CubismUP_2D
   </div>
   <div id="projectbrief">Velocity-Pressure solver</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('dc/d70/_block_lab_8h_source.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">BlockLab.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../dc/d70/_block_lab_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> *  BlockLab.h</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *  Cubism</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *  Created by Diego Rossinelli on 5/24/09.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *  Copyright 2009 CSE Lab, ETH Zurich. All rights reserved.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#pragma once</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/dfa/_matrix3_d_8h.html">Matrix3D.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/dea/_grid_8h.html">Grid.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//#include &quot;Concepts.h&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> TBlock, <span class="keyword">template</span>&lt;<span class="keyword">typename</span> X&gt; <span class="keyword">class </span>allocator = std::allocator, <span class="keyword">typename</span> ElementTypeT = <span class="keyword">typename</span> TBlock::ElementType&gt;</div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="../../d7/d95/class_block_lab.html">   25</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d7/d95/class_block_lab.html">BlockLab</a></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;{</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <span class="comment">// check concepts</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="comment">//   CONCEPT_CHECK(Concepts::BlockLabElementType&lt;ElementTypeT&gt;);</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="comment">//   CONCEPT_CHECK(Concepts::Castable&lt;typename BlockType::ElementType, ElementTypeT&gt;);</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="../../d7/d95/class_block_lab.html#accdcd2d5e815a8497e5ef9ae884da6b6">   32</a></span>&#160;    <span class="keyword">typedef</span> ElementTypeT <a class="code" href="../../d7/d95/class_block_lab.html#accdcd2d5e815a8497e5ef9ae884da6b6">ElementType</a>;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="../../d7/d95/class_block_lab.html#a745b3c9ac17f6743d11a7085196981a0">   35</a></span>&#160;    <span class="keyword">typedef</span> TBlock <a class="code" href="../../d7/d95/class_block_lab.html#a745b3c9ac17f6743d11a7085196981a0">BlockType</a>;</div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="../../d7/d95/class_block_lab.html#ad547d74881a0d226a849e2051af6b26b">   36</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> BlockType::ElementType <a class="code" href="../../d7/d95/class_block_lab.html#ad547d74881a0d226a849e2051af6b26b">ElementTypeBlock</a>;</div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="../../d7/d95/class_block_lab.html#ad3a1e6e1a1002fb812d6853c8ac1ec9ead9471f6585bd7cf7ddc9edad96e67362">   37</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="../../d7/d95/class_block_lab.html#ad3a1e6e1a1002fb812d6853c8ac1ec9e">eBlockLab_State</a> {<a class="code" href="../../d7/d95/class_block_lab.html#ad3a1e6e1a1002fb812d6853c8ac1ec9ea6c1a64be2e953c6093dab00aab32fe00">eMRAGBlockLab_Prepared</a>, <a class="code" href="../../d7/d95/class_block_lab.html#ad3a1e6e1a1002fb812d6853c8ac1ec9eadaaa507dbe601b991a383e6a0701a09c">eMRAGBlockLab_Loaded</a>, <a class="code" href="../../d7/d95/class_block_lab.html#ad3a1e6e1a1002fb812d6853c8ac1ec9ead9471f6585bd7cf7ddc9edad96e67362">eMRAGBlockLab_Uninitialized</a>};</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    </div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="../../d7/d95/class_block_lab.html#a0e11603d73ab4923e1d9033edccdb572">   39</a></span>&#160;    <a class="code" href="../../d7/d95/class_block_lab.html#ad3a1e6e1a1002fb812d6853c8ac1ec9e">eBlockLab_State</a> <a class="code" href="../../d7/d95/class_block_lab.html#a0e11603d73ab4923e1d9033edccdb572">m_state</a>;</div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="../../d7/d95/class_block_lab.html#aa6a4c4e00a9bb5ca5780d820b146485b">   40</a></span>&#160;    <a class="code" href="../../da/d8b/class_matrix3_d.html">Matrix3D&lt;ElementType, true, allocator&gt;</a> * <a class="code" href="../../d7/d95/class_block_lab.html#aa6a4c4e00a9bb5ca5780d820b146485b">m_cacheBlock</a>;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    </div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="../../d7/d95/class_block_lab.html#a8ac6690f98ba84346a74b5b95c3afb2b">   42</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d7/d95/class_block_lab.html#a8ac6690f98ba84346a74b5b95c3afb2b">m_stencilStart</a>[3], <a class="code" href="../../d7/d95/class_block_lab.html#a46fee08b49b11be489c71f726e258cc9">m_stencilEnd</a>[3];</div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="../../d7/d95/class_block_lab.html#acdd7f4e2489d31da6a2a76099807a7c5">   43</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d7/d95/class_block_lab.html#abcd7367c6f45124d3202c8da5043ac93">NX</a>, <a class="code" href="../../d7/d95/class_block_lab.html#aaa1e748664ebb6b4fc7c47cf30a445db">NY</a>, <a class="code" href="../../d7/d95/class_block_lab.html#acdd7f4e2489d31da6a2a76099807a7c5">NZ</a>;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    </div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="../../d7/d95/class_block_lab.html#ade306bb6935a0ead765444534c2e05db">   45</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../d7/d95/class_block_lab.html#ade306bb6935a0ead765444534c2e05db">istensorial</a>;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    </div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="../../d7/d95/class_block_lab.html#acccfe85f166f20526118fce09b28fb04">   47</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="../../da/d74/class_grid.html">Grid&lt;BlockType, allocator&gt;</a>* <a class="code" href="../../d7/d95/class_block_lab.html#acccfe85f166f20526118fce09b28fb04">m_refGrid</a>;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    </div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="../../d7/d95/class_block_lab.html#a669ac139b57be4967e5f43bc649a8520">   49</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d7/d95/class_block_lab.html#a669ac139b57be4967e5f43bc649a8520">_apply_bc</a>(<span class="keyword">const</span> <a class="code" href="../../d4/ded/struct_block_info.html">BlockInfo</a>&amp; info, <span class="keyword">const</span> <a class="code" href="../../d2/d27/_h_d_f5_dumper_8h.html#a445a5f0e2a34c9d97d69a3c2d1957907">Real</a> t=0) { }</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="../../d7/d95/class_block_lab.html#ab23c907953858c8b393a9910ecf5b1cf">   52</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d7/d95/class_block_lab.html#ab23c907953858c8b393a9910ecf5b1cf">_release</a>(T *&amp; t) </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    { </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <span class="keywordflow">if</span> (t != NULL)</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;            allocator&lt;T&gt;().destroy(t);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;            allocator&lt;T&gt;().deallocate(t,1); </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        t = NULL; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    }</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    </div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="../../d7/d95/class_block_lab.html#a0cb8aec5f42c4b1860be8aa218660087">   64</a></span>&#160;    <a class="code" href="../../d7/d95/class_block_lab.html#a0cb8aec5f42c4b1860be8aa218660087">BlockLab</a>():</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    m_state(<a class="code" href="../../d7/d95/class_block_lab.html#ad3a1e6e1a1002fb812d6853c8ac1ec9ead9471f6585bd7cf7ddc9edad96e67362">eMRAGBlockLab_Uninitialized</a>),</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    m_cacheBlock(NULL),</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    m_refGrid(NULL)</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    {</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        m_stencilStart[0] = m_stencilStart[1] = m_stencilStart[2] = 0;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        m_stencilEnd[0] = m_stencilEnd[1] = m_stencilEnd[2] = 0;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    }</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    </div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="../../d7/d95/class_block_lab.html#aaf6e3ab940c5c3cf7463bad112527f98">   73</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="../../d7/d95/class_block_lab.html#aaf6e3ab940c5c3cf7463bad112527f98">is_xperiodic</a>() { <span class="keywordflow">return</span> <span class="keyword">true</span>; }</div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="../../d7/d95/class_block_lab.html#a5455e54c8e874ee9da6159ea0d1651ed">   74</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="../../d7/d95/class_block_lab.html#a5455e54c8e874ee9da6159ea0d1651ed">is_yperiodic</a>() { <span class="keywordflow">return</span> <span class="keyword">true</span>; }</div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="../../d7/d95/class_block_lab.html#a0fd3a720fb3f2f76845ff4323e89bb91">   75</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="../../d7/d95/class_block_lab.html#a0fd3a720fb3f2f76845ff4323e89bb91">is_zperiodic</a>() { <span class="keywordflow">return</span> <span class="keyword">true</span>; }</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    </div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="../../d7/d95/class_block_lab.html#a083218471f59c32fccc335759734667d">   77</a></span>&#160;    <a class="code" href="../../d7/d95/class_block_lab.html#a083218471f59c32fccc335759734667d">~BlockLab</a>()</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <a class="code" href="../../d7/d95/class_block_lab.html#ab23c907953858c8b393a9910ecf5b1cf">_release</a>(m_cacheBlock);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    }</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> dim&gt;</div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="../../d7/d95/class_block_lab.html#aa45e40066bececd40de75c238c346e79">   83</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d7/d95/class_block_lab.html#aa45e40066bececd40de75c238c346e79">getActualSize</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="keyword">    </span>{</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        assert(dim&gt;=0 &amp;&amp; dim&lt;3);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="keywordflow">return</span> m_cacheBlock-&gt;<a class="code" href="../../da/d8b/class_matrix3_d.html#af59a187071d2eaace597398ba649a41d">getSize</a>()[dim];</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    </div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="../../d7/d95/class_block_lab.html#a4dd07a50f8766b29717b9326e67a9fcd">   89</a></span>&#160;    <span class="keyword">inline</span> ElementType * <a class="code" href="../../d7/d95/class_block_lab.html#a4dd07a50f8766b29717b9326e67a9fcd">getBuffer</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> &amp;m_cacheBlock-&gt;<a class="code" href="../../da/d8b/class_matrix3_d.html#a5984d2df3c56ee1ace3297225b0a278f">LinAccess</a>(0);}</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    </div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="../../d7/d95/class_block_lab.html#ad529f8c851da336419ad63c25ba76429">   91</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d7/d95/class_block_lab.html#ad529f8c851da336419ad63c25ba76429">prepare</a>(<a class="code" href="../../da/d74/class_grid.html">Grid&lt;BlockType,allocator&gt;</a>&amp; grid, <span class="keywordtype">int</span> startX, <span class="keywordtype">int</span> endX, <span class="keywordtype">int</span> startY, <span class="keywordtype">int</span> endY, <span class="keywordtype">int</span> startZ, <span class="keywordtype">int</span> endZ, <span class="keyword">const</span> <span class="keywordtype">bool</span> istensorial)</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    {</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> ss[3] = {startX, startY, startZ};</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> se[3] = {endX, endY, endZ};</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <a class="code" href="../../d7/d95/class_block_lab.html#ad529f8c851da336419ad63c25ba76429">prepare</a>(grid, ss, se, istensorial);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    }</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    </div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="../../d7/d95/class_block_lab.html#ac6236e1c94d13fa1025c8253b9855a04">  108</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d7/d95/class_block_lab.html#ac6236e1c94d13fa1025c8253b9855a04">prepare</a>(<a class="code" href="../../da/d74/class_grid.html">Grid&lt;BlockType,allocator&gt;</a>&amp; grid, <span class="keyword">const</span> <span class="keywordtype">int</span> stencil_start[3], <span class="keyword">const</span> <span class="keywordtype">int</span> stencil_end[3], <span class="keyword">const</span> <span class="keywordtype">bool</span> istensorial)</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        NX = grid.<a class="code" href="../../da/d74/class_grid.html#a68154c3137ad02f44a24d2d75d807fe6">getBlocksPerDimension</a>(0);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        NY = grid.<a class="code" href="../../da/d74/class_grid.html#a68154c3137ad02f44a24d2d75d807fe6">getBlocksPerDimension</a>(1);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        NZ = grid.<a class="code" href="../../da/d74/class_grid.html#a68154c3137ad02f44a24d2d75d807fe6">getBlocksPerDimension</a>(2);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        this-&gt;istensorial = <a class="code" href="../../d7/d95/class_block_lab.html#ade306bb6935a0ead765444534c2e05db">istensorial</a>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        m_refGrid = &amp;grid;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        assert(stencil_start[0]&gt;= -BlockType::sizeX);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        assert(stencil_start[1]&gt;= -BlockType::sizeY);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        assert(stencil_start[2]&gt;= -BlockType::sizeZ);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        assert(stencil_end[0] &lt; BlockType::sizeX*2);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        assert(stencil_end[1] &lt; BlockType::sizeY*2);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        assert(stencil_end[2] &lt; BlockType::sizeZ*2);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        m_stencilStart[0] = stencil_start[0];</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        m_stencilStart[1] = stencil_start[1];</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        m_stencilStart[2] = stencil_start[2];</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        m_stencilEnd[0] = stencil_end[0];</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        m_stencilEnd[1] = stencil_end[1];</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        m_stencilEnd[2] = stencil_end[2];</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        assert(m_stencilStart[0]&lt;=m_stencilEnd[0]);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        assert(m_stencilStart[1]&lt;=m_stencilEnd[1]);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        assert(m_stencilStart[2]&lt;=m_stencilEnd[2]);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keywordflow">if</span> (m_cacheBlock == NULL || </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            m_cacheBlock-&gt;<a class="code" href="../../da/d8b/class_matrix3_d.html#af59a187071d2eaace597398ba649a41d">getSize</a>()[0]!= BlockType::sizeX + m_stencilEnd[0] - m_stencilStart[0] -1 ||</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            m_cacheBlock-&gt;<a class="code" href="../../da/d8b/class_matrix3_d.html#af59a187071d2eaace597398ba649a41d">getSize</a>()[1]!= BlockType::sizeY + m_stencilEnd[1] - m_stencilStart[1] -1 ||</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            m_cacheBlock-&gt;<a class="code" href="../../da/d8b/class_matrix3_d.html#af59a187071d2eaace597398ba649a41d">getSize</a>()[2]!= BlockType::sizeZ + m_stencilEnd[2] - m_stencilStart[2] -1 )</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            <span class="keywordflow">if</span> (m_cacheBlock != NULL)</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                <a class="code" href="../../d7/d95/class_block_lab.html#ab23c907953858c8b393a9910ecf5b1cf">_release</a>(m_cacheBlock);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            m_cacheBlock = allocator&lt; Matrix3D&lt;ElementType,  true, allocator&gt; &gt;().<a class="code" href="../../d6/d5a/_layer_8h.html#a91872f9122bcdbdf11a8388e661b0f5b">allocate</a>(1);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            allocator&lt; Matrix3D&lt;ElementType,  true, allocator&gt; &gt;().construct(m_cacheBlock, <a class="code" href="../../da/d8b/class_matrix3_d.html">Matrix3D&lt;ElementType,  true, allocator&gt;</a> ());</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            m_cacheBlock-&gt;<a class="code" href="../../da/d8b/class_matrix3_d.html#a159420c44012651ebd73d308fc9481c1">_Setup</a>(BlockType::sizeX + m_stencilEnd[0] - m_stencilStart[0] -1,</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                                 BlockType::sizeY + m_stencilEnd[1] - m_stencilStart[1] -1,</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                                 BlockType::sizeZ + m_stencilEnd[2] - m_stencilStart[2] -1);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        m_state = <a class="code" href="../../d7/d95/class_block_lab.html#ad3a1e6e1a1002fb812d6853c8ac1ec9ea6c1a64be2e953c6093dab00aab32fe00">eMRAGBlockLab_Prepared</a>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="comment">//  printf(&quot;ss: %d %d %d  se: %d %d %d\n&quot;, m_stencilStart[0], m_stencilStart[1], m_stencilStart[2], </span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="comment">//          m_stencilEnd[0], m_stencilEnd[1], m_stencilEnd[2]);</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    }</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    </div>
<div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="../../d7/d95/class_block_lab.html#aefd27fed8fbb1d3d60fe1457ae90f248">  167</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d7/d95/class_block_lab.html#aefd27fed8fbb1d3d60fe1457ae90f248">load</a>(<span class="keyword">const</span> <a class="code" href="../../d4/ded/struct_block_info.html">BlockInfo</a>&amp; info, <span class="keyword">const</span> <a class="code" href="../../d2/d27/_h_d_f5_dumper_8h.html#a445a5f0e2a34c9d97d69a3c2d1957907">Real</a> t=0, <span class="keyword">const</span> <span class="keywordtype">bool</span> applybc=<span class="keyword">true</span>)</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../da/d74/class_grid.html">Grid&lt;BlockType,allocator&gt;</a>&amp; grid = *<a class="code" href="../../d7/d95/class_block_lab.html#acccfe85f166f20526118fce09b28fb04">m_refGrid</a>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="comment">//0. couple of checks</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="comment">//1. load the block into the cache</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="comment">//2. put the ghosts into the cache</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="comment">//0.</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        assert(m_state == <a class="code" href="../../d7/d95/class_block_lab.html#ad3a1e6e1a1002fb812d6853c8ac1ec9ea6c1a64be2e953c6093dab00aab32fe00">eMRAGBlockLab_Prepared</a> || m_state==<a class="code" href="../../d7/d95/class_block_lab.html#ad3a1e6e1a1002fb812d6853c8ac1ec9eadaaa507dbe601b991a383e6a0701a09c">eMRAGBlockLab_Loaded</a>);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        assert(m_cacheBlock != NULL);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> nX = BlockType::sizeX;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> nY = BlockType::sizeY;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> nZ = BlockType::sizeZ;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="comment">//1.</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            assert(<span class="keyword">sizeof</span>(ElementType) == <span class="keyword">sizeof</span>(<span class="keyword">typename</span> BlockType::ElementType));</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            BlockType&amp; block = *(BlockType *)info.<a class="code" href="../../d4/ded/struct_block_info.html#af3655416c17becfb24a9f475a7b97d23">ptrBlock</a>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            ElementTypeBlock * ptrSource = &amp;block(0);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> iz=0; iz&lt;nZ; iz++)</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                <span class="keywordflow">for</span>(<span class="keywordtype">int</span> iy=0; iy&lt;nY; iy++)</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                {                   </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                    ElementType * ptrDestination = &amp;m_cacheBlock-&gt;<a class="code" href="../../da/d8b/class_matrix3_d.html#afd365350a07f54220264968e3dade5c0">Access</a>(0-m_stencilStart[0], iy-m_stencilStart[1], iz-m_stencilStart[2]);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                    </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                    <span class="comment">//for(int ix=0; ix&lt;nX; ix++, ptrSource++, ptrDestination++)</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                    <span class="comment">//  *ptrDestination = (ElementType)*ptrSource;</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                    memcpy(ptrDestination, ptrSource, <span class="keyword">sizeof</span>(ElementType)*nX);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                    </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                    ptrSource+= nX;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                }</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="comment">//2.</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">bool</span> xperiodic = <a class="code" href="../../d7/d95/class_block_lab.html#aaf6e3ab940c5c3cf7463bad112527f98">is_xperiodic</a>();</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">bool</span> yperiodic = <a class="code" href="../../d7/d95/class_block_lab.html#a5455e54c8e874ee9da6159ea0d1651ed">is_yperiodic</a>();</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">bool</span> zperiodic = <a class="code" href="../../d7/d95/class_block_lab.html#a0fd3a720fb3f2f76845ff4323e89bb91">is_zperiodic</a>();</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">bool</span> xskin = info.<a class="code" href="../../d4/ded/struct_block_info.html#ad32832aaa2dee35464a74abfae741572">index</a>[0]==0 || info.<a class="code" href="../../d4/ded/struct_block_info.html#ad32832aaa2dee35464a74abfae741572">index</a>[0]==grid.<a class="code" href="../../da/d74/class_grid.html#a68154c3137ad02f44a24d2d75d807fe6">getBlocksPerDimension</a>(0)-1;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">bool</span> yskin = info.<a class="code" href="../../d4/ded/struct_block_info.html#ad32832aaa2dee35464a74abfae741572">index</a>[1]==0 || info.<a class="code" href="../../d4/ded/struct_block_info.html#ad32832aaa2dee35464a74abfae741572">index</a>[1]==grid.<a class="code" href="../../da/d74/class_grid.html#a68154c3137ad02f44a24d2d75d807fe6">getBlocksPerDimension</a>(1)-1;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">bool</span> zskin = info.<a class="code" href="../../d4/ded/struct_block_info.html#ad32832aaa2dee35464a74abfae741572">index</a>[2]==0 || info.<a class="code" href="../../d4/ded/struct_block_info.html#ad32832aaa2dee35464a74abfae741572">index</a>[2]==grid.<a class="code" href="../../da/d74/class_grid.html#a68154c3137ad02f44a24d2d75d807fe6">getBlocksPerDimension</a>(2)-1;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> xskip = info.<a class="code" href="../../d4/ded/struct_block_info.html#ad32832aaa2dee35464a74abfae741572">index</a>[0]==0 ? -1 : 1;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> yskip = info.<a class="code" href="../../d4/ded/struct_block_info.html#ad32832aaa2dee35464a74abfae741572">index</a>[1]==0 ? -1 : 1;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> zskip = info.<a class="code" href="../../d4/ded/struct_block_info.html#ad32832aaa2dee35464a74abfae741572">index</a>[2]==0 ? -1 : 1;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> icode=0; icode&lt;27; icode++)</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                <span class="keywordflow">if</span> (icode == 1*1 + 3*1 + 9*1) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> code[3] = { icode%3-1, (icode/3)%3-1, (icode/9)%3-1};</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                <span class="keywordflow">if</span> (!xperiodic &amp;&amp; code[0] == xskip &amp;&amp; xskin) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                <span class="keywordflow">if</span> (!yperiodic &amp;&amp; code[1] == yskip &amp;&amp; yskin) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                <span class="keywordflow">if</span> (!zperiodic &amp;&amp; code[2] == zskip &amp;&amp; zskin) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                <span class="keywordflow">if</span> (!istensorial &amp;&amp; abs(code[0])+abs(code[1])+abs(code[2])&gt;1) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> s[3] = { </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                    code[0]&lt;1? (code[0]&lt;0 ? m_stencilStart[0]:0 ) : nX, </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                    code[1]&lt;1? (code[1]&lt;0 ? m_stencilStart[1]:0 ) : nY, </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                    code[2]&lt;1? (code[2]&lt;0 ? m_stencilStart[2]:0 ) : nZ };</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> e[3] = {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                    code[0]&lt;1? (code[0]&lt;0 ? 0:nX ) : nX+m_stencilEnd[0]-1, </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                    code[1]&lt;1? (code[1]&lt;0 ? 0:nY ) : nY+m_stencilEnd[1]-1, </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                    code[2]&lt;1? (code[2]&lt;0 ? 0:nZ ) : nZ+m_stencilEnd[2]-1};</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                <span class="keywordflow">if</span> (!grid.<a class="code" href="../../da/d74/class_grid.html#ae2014bfbb3953437effb08202e7cd482">avail</a>(info.<a class="code" href="../../d4/ded/struct_block_info.html#ad32832aaa2dee35464a74abfae741572">index</a>[0] + code[0], info.<a class="code" href="../../d4/ded/struct_block_info.html#ad32832aaa2dee35464a74abfae741572">index</a>[1] + code[1], info.<a class="code" href="../../d4/ded/struct_block_info.html#ad32832aaa2dee35464a74abfae741572">index</a>[2] + code[2])) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                BlockType&amp; b = grid(info.<a class="code" href="../../d4/ded/struct_block_info.html#ad32832aaa2dee35464a74abfae741572">index</a>[0] + code[0], info.<a class="code" href="../../d4/ded/struct_block_info.html#ad32832aaa2dee35464a74abfae741572">index</a>[1] + code[1], info.<a class="code" href="../../d4/ded/struct_block_info.html#ad32832aaa2dee35464a74abfae741572">index</a>[2] + code[2]);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                <span class="keywordflow">for</span>(<span class="keywordtype">int</span> iz=s[2]; iz&lt;e[2]; iz++)</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> iy=s[1]; iy&lt;e[1]; iy++)</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                    {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                        <span class="comment">/*  char * ptrDest = (char*)&amp;m_cacheBlock-&gt;Access(0-m_stencilStart[0], iy-m_stencilStart[1], iz-m_stencilStart[2]);</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">                         const char * ptrSrc = (const char*)&amp;b(0 - code[0]*BlockType::sizeX, iy - code[1]*BlockType::sizeY, iz - code[2]*BlockType::sizeZ);</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">                         const int bytes = (e[0]-s[0])*sizeof(ElementType);</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">                         memcpy(ptrDest, ptrSrc, bytes);*/</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> ix=s[0]; ix&lt;e[0]; ix++)</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                            m_cacheBlock-&gt;<a class="code" href="../../da/d8b/class_matrix3_d.html#afd365350a07f54220264968e3dade5c0">Access</a>(ix-m_stencilStart[0], iy-m_stencilStart[1], iz-m_stencilStart[2]) = </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                            (<a class="code" href="../../d7/d95/class_block_lab.html#accdcd2d5e815a8497e5ef9ae884da6b6">ElementType</a>)b(ix - code[0]*BlockType::sizeX, iy - code[1]*BlockType::sizeY, iz - code[2]*BlockType::sizeZ);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                    }</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            <span class="keywordflow">if</span> (applybc) <a class="code" href="../../d7/d95/class_block_lab.html#a669ac139b57be4967e5f43bc649a8520">_apply_bc</a>(info, t);            </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            m_state = <a class="code" href="../../d7/d95/class_block_lab.html#ad3a1e6e1a1002fb812d6853c8ac1ec9eadaaa507dbe601b991a383e6a0701a09c">eMRAGBlockLab_Loaded</a>;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    </div>
<div class="line"><a name="l00271"></a><span class="lineno"><a class="line" href="../../d7/d95/class_block_lab.html#abd79a09ab5b54cf04bfe25c125ea1edf">  271</a></span>&#160;    ElementType&amp; <a class="code" href="../../d7/d95/class_block_lab.html#abd79a09ab5b54cf04bfe25c125ea1edf">operator()</a>(<span class="keywordtype">int</span> ix, <span class="keywordtype">int</span> iy=0, <span class="keywordtype">int</span> iz=0)</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        assert(m_state == <a class="code" href="../../d7/d95/class_block_lab.html#ad3a1e6e1a1002fb812d6853c8ac1ec9eadaaa507dbe601b991a383e6a0701a09c">eMRAGBlockLab_Loaded</a>);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> nX = m_cacheBlock-&gt;<a class="code" href="../../da/d8b/class_matrix3_d.html#af59a187071d2eaace597398ba649a41d">getSize</a>()[0];</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> nY = m_cacheBlock-&gt;<a class="code" href="../../da/d8b/class_matrix3_d.html#af59a187071d2eaace597398ba649a41d">getSize</a>()[1];</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> nZ = m_cacheBlock-&gt;<a class="code" href="../../da/d8b/class_matrix3_d.html#af59a187071d2eaace597398ba649a41d">getSize</a>()[2];</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        assert(ix-m_stencilStart[0]&gt;=0 &amp;&amp; ix-m_stencilStart[0]&lt;nX);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        assert(iy-m_stencilStart[1]&gt;=0 &amp;&amp; iy-m_stencilStart[1]&lt;nY);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        assert(iz-m_stencilStart[2]&gt;=0 &amp;&amp; iz-m_stencilStart[2]&lt;nZ);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="keywordflow">return</span> m_cacheBlock-&gt;<a class="code" href="../../da/d8b/class_matrix3_d.html#afd365350a07f54220264968e3dade5c0">Access</a>(ix-m_stencilStart[0], iy-m_stencilStart[1], iz-m_stencilStart[2]);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    </div>
<div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="../../d7/d95/class_block_lab.html#a3e06d4124f7d69923b4ee6345c105cfc">  287</a></span>&#160;    <span class="keyword">const</span> ElementType&amp; <a class="code" href="../../d7/d95/class_block_lab.html#a3e06d4124f7d69923b4ee6345c105cfc">read</a>(<span class="keywordtype">int</span> ix, <span class="keywordtype">int</span> iy=0, <span class="keywordtype">int</span> iz=0)<span class="keyword"> const</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="keyword">    </span>{</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        assert(m_state == <a class="code" href="../../d7/d95/class_block_lab.html#ad3a1e6e1a1002fb812d6853c8ac1ec9eadaaa507dbe601b991a383e6a0701a09c">eMRAGBlockLab_Loaded</a>);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        </div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> nX = m_cacheBlock-&gt;<a class="code" href="../../da/d8b/class_matrix3_d.html#af59a187071d2eaace597398ba649a41d">getSize</a>()[0];</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> nY = m_cacheBlock-&gt;<a class="code" href="../../da/d8b/class_matrix3_d.html#af59a187071d2eaace597398ba649a41d">getSize</a>()[1];</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> nZ = m_cacheBlock-&gt;<a class="code" href="../../da/d8b/class_matrix3_d.html#af59a187071d2eaace597398ba649a41d">getSize</a>()[2];</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        assert(ix-m_stencilStart[0]&gt;=0 &amp;&amp; ix-m_stencilStart[0]&lt;nX);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        assert(iy-m_stencilStart[1]&gt;=0 &amp;&amp; iy-m_stencilStart[1]&lt;nY);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        assert(iz-m_stencilStart[2]&gt;=0 &amp;&amp; iz-m_stencilStart[2]&lt;nZ);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">return</span> m_cacheBlock-&gt;<a class="code" href="../../da/d8b/class_matrix3_d.html#afd365350a07f54220264968e3dade5c0">Access</a>(ix-m_stencilStart[0], iy-m_stencilStart[1], iz-m_stencilStart[2]);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    </div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="comment">//forbidden</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="../../d7/d95/class_block_lab.html#a0cb8aec5f42c4b1860be8aa218660087">BlockLab</a>(<span class="keyword">const</span> <a class="code" href="../../d7/d95/class_block_lab.html">BlockLab</a>&amp;):</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    m_state(<a class="code" href="../../d7/d95/class_block_lab.html#ad3a1e6e1a1002fb812d6853c8ac1ec9ead9471f6585bd7cf7ddc9edad96e67362">eMRAGBlockLab_Uninitialized</a>),</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    m_cacheBlock(NULL){abort();}</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <a class="code" href="../../d7/d95/class_block_lab.html">BlockLab</a>&amp; operator=(<span class="keyword">const</span> <a class="code" href="../../d7/d95/class_block_lab.html">BlockLab</a>&amp;){abort(); <span class="keywordflow">return</span> *<span class="keyword">this</span>;}</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;};</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> BlockType, <span class="keyword">template</span>&lt;<span class="keyword">typename</span> X&gt; <span class="keyword">class </span>allocator = std::allocator, <span class="keyword">typename</span> ElementTypeT = <span class="keyword">typename</span> BlockType::ElementType &gt;</div>
<div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="../../db/d11/class_empty_block_lab.html">  314</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../db/d11/class_empty_block_lab.html">EmptyBlockLab</a>:  <a class="code" href="../../d7/d95/class_block_lab.html">BlockLab</a>&lt;BlockType, allocator, ElementTypeT&gt;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;{</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordtype">int</span> current_size[3];</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="keyword">public</span>: </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    </div>
<div class="line"><a name="l00320"></a><span class="lineno"><a class="line" href="../../db/d11/class_empty_block_lab.html#a8311d174957e8254a665b5b23c38e844">  320</a></span>&#160;    <a class="code" href="../../db/d11/class_empty_block_lab.html#a8311d174957e8254a665b5b23c38e844">EmptyBlockLab</a>():<a class="code" href="../../d7/d95/class_block_lab.html">BlockLab</a>&lt;BlockType, allocator, ElementTypeT&gt;()</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        current_size[0] = current_size[1] = current_size[2] = 0;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    </div>
<div class="line"><a name="l00325"></a><span class="lineno"><a class="line" href="../../db/d11/class_empty_block_lab.html#a090310d2af6fb159b6fe949413cbd47a">  325</a></span>&#160;    <span class="keyword">typedef</span> ElementTypeT <a class="code" href="../../db/d11/class_empty_block_lab.html#a090310d2af6fb159b6fe949413cbd47a">ElementType</a>;</div>
<div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="../../db/d11/class_empty_block_lab.html#acc1e6ead590c67446bee384eb3a3ec49">  326</a></span>&#160;    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="../../db/d11/class_empty_block_lab.html#acc1e6ead590c67446bee384eb3a3ec49">prepare</a>(<a class="code" href="../../da/d74/class_grid.html">Grid&lt;BlockType,allocator&gt;</a>&amp; grid, <span class="keyword">const</span> <span class="keywordtype">int</span> stencil_start[3], <span class="keyword">const</span> <span class="keywordtype">int</span> stencil_end[3])</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        this-&gt;m_refGrid = &amp;grid;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        assert(stencil_start[0]&gt;= -BlockType::sizeX);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        assert(stencil_start[1]&gt;= -BlockType::sizeY);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        assert(stencil_start[2]&gt;= -BlockType::sizeZ);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        assert(stencil_end[0] &lt; BlockType::sizeX*2);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        assert(stencil_end[1] &lt; BlockType::sizeY*2);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        assert(stencil_end[2] &lt; BlockType::sizeZ*2);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        this-&gt;m_stencilStart[0] = stencil_start[0];</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        this-&gt;m_stencilStart[1] = stencil_start[1];</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        this-&gt;m_stencilStart[2] = stencil_start[2];</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        this-&gt;m_stencilEnd[0] = stencil_end[0];</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        this-&gt;m_stencilEnd[1] = stencil_end[1];</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        this-&gt;m_stencilEnd[2] = stencil_end[2];</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        assert(this-&gt;m_stencilStart[0]&lt;=this-&gt;m_stencilEnd[0]);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        assert(this-&gt;m_stencilStart[1]&lt;=this-&gt;m_stencilEnd[1]);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        assert(this-&gt;m_stencilStart[2]&lt;=this-&gt;m_stencilEnd[2]);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="keywordflow">if</span> (current_size[0]!= BlockType::sizeX + this-&gt;m_stencilEnd[0] - this-&gt;m_stencilStart[0] -1 ||</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            current_size[1]!= BlockType::sizeY + this-&gt;m_stencilEnd[1] - this-&gt;m_stencilStart[1] -1 ||</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            current_size[2]!= BlockType::sizeZ + this-&gt;m_stencilEnd[2] - this-&gt;m_stencilStart[2] -1 )</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            current_size[0] = BlockType::sizeX + this-&gt;m_stencilEnd[0] - this-&gt;m_stencilStart[0] -1;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            current_size[1] = BlockType::sizeY + this-&gt;m_stencilEnd[1] - this-&gt;m_stencilStart[1] -1;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            current_size[2] = BlockType::sizeZ + this-&gt;m_stencilEnd[2] - this-&gt;m_stencilStart[2] -1;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        }</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        </div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        this-&gt;m_state = <a class="code" href="../../d7/d95/class_block_lab.html">BlockLab&lt;BlockType, allocator, ElementTypeT&gt;::eMRAGBlockLab_Prepared</a>;       </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    }</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;};</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div>
<div class="ttc" id="class_block_lab_html_aaf6e3ab940c5c3cf7463bad112527f98"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#aaf6e3ab940c5c3cf7463bad112527f98">BlockLab::is_xperiodic</a></div><div class="ttdeci">virtual bool is_xperiodic()</div><div class="ttdef"><b>Definition:</b> BlockLab.h:73</div></div>
<div class="ttc" id="class_block_lab_html_aaa1e748664ebb6b4fc7c47cf30a445db"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#aaa1e748664ebb6b4fc7c47cf30a445db">BlockLab::NY</a></div><div class="ttdeci">int NY</div><div class="ttdef"><b>Definition:</b> BlockLab.h:43</div></div>
<div class="ttc" id="class_block_lab_html_a745b3c9ac17f6743d11a7085196981a0"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#a745b3c9ac17f6743d11a7085196981a0">BlockLab::BlockType</a></div><div class="ttdeci">TBlock BlockType</div><div class="ttdef"><b>Definition:</b> BlockLab.h:35</div></div>
<div class="ttc" id="class_matrix3_d_html_a5984d2df3c56ee1ace3297225b0a278f"><div class="ttname"><a href="../../da/d8b/class_matrix3_d.html#a5984d2df3c56ee1ace3297225b0a278f">Matrix3D::LinAccess</a></div><div class="ttdeci">DataType &amp; LinAccess(unsigned int i) const </div><div class="ttdef"><b>Definition:</b> Matrix3D.h:154</div></div>
<div class="ttc" id="class_block_lab_html_ad3a1e6e1a1002fb812d6853c8ac1ec9eadaaa507dbe601b991a383e6a0701a09c"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#ad3a1e6e1a1002fb812d6853c8ac1ec9eadaaa507dbe601b991a383e6a0701a09c">BlockLab::eMRAGBlockLab_Loaded</a></div><div class="ttdef"><b>Definition:</b> BlockLab.h:37</div></div>
<div class="ttc" id="class_block_lab_html_ac6236e1c94d13fa1025c8253b9855a04"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#ac6236e1c94d13fa1025c8253b9855a04">BlockLab::prepare</a></div><div class="ttdeci">void prepare(Grid&lt; BlockType, allocator &gt; &amp;grid, const int stencil_start[3], const int stencil_end[3], const bool istensorial)</div><div class="ttdef"><b>Definition:</b> BlockLab.h:108</div></div>
<div class="ttc" id="class_block_lab_html_aa6a4c4e00a9bb5ca5780d820b146485b"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#aa6a4c4e00a9bb5ca5780d820b146485b">BlockLab::m_cacheBlock</a></div><div class="ttdeci">Matrix3D&lt; ElementType, true, allocator &gt; * m_cacheBlock</div><div class="ttdef"><b>Definition:</b> BlockLab.h:40</div></div>
<div class="ttc" id="class_empty_block_lab_html_a8311d174957e8254a665b5b23c38e844"><div class="ttname"><a href="../../db/d11/class_empty_block_lab.html#a8311d174957e8254a665b5b23c38e844">EmptyBlockLab::EmptyBlockLab</a></div><div class="ttdeci">EmptyBlockLab()</div><div class="ttdef"><b>Definition:</b> BlockLab.h:320</div></div>
<div class="ttc" id="class_block_lab_html_a46fee08b49b11be489c71f726e258cc9"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#a46fee08b49b11be489c71f726e258cc9">BlockLab::m_stencilEnd</a></div><div class="ttdeci">int m_stencilEnd[3]</div><div class="ttdef"><b>Definition:</b> BlockLab.h:42</div></div>
<div class="ttc" id="class_block_lab_html_a0fd3a720fb3f2f76845ff4323e89bb91"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#a0fd3a720fb3f2f76845ff4323e89bb91">BlockLab::is_zperiodic</a></div><div class="ttdeci">virtual bool is_zperiodic()</div><div class="ttdef"><b>Definition:</b> BlockLab.h:75</div></div>
<div class="ttc" id="_matrix3_d_8h_html"><div class="ttname"><a href="../../dd/dfa/_matrix3_d_8h.html">Matrix3D.h</a></div></div>
<div class="ttc" id="struct_block_info_html"><div class="ttname"><a href="../../d4/ded/struct_block_info.html">BlockInfo</a></div><div class="ttdef"><b>Definition:</b> BlockInfo.h:13</div></div>
<div class="ttc" id="class_block_lab_html_acdd7f4e2489d31da6a2a76099807a7c5"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#acdd7f4e2489d31da6a2a76099807a7c5">BlockLab::NZ</a></div><div class="ttdeci">int NZ</div><div class="ttdef"><b>Definition:</b> BlockLab.h:43</div></div>
<div class="ttc" id="class_block_lab_html_ad3a1e6e1a1002fb812d6853c8ac1ec9e"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#ad3a1e6e1a1002fb812d6853c8ac1ec9e">BlockLab::eBlockLab_State</a></div><div class="ttdeci">eBlockLab_State</div><div class="ttdef"><b>Definition:</b> BlockLab.h:37</div></div>
<div class="ttc" id="_layer_8h_html_a91872f9122bcdbdf11a8388e661b0f5b"><div class="ttname"><a href="../../d6/d5a/_layer_8h.html#a91872f9122bcdbdf11a8388e661b0f5b">allocate</a></div><div class="ttdeci">LayerT * allocate()</div><div class="ttdef"><b>Definition:</b> Layer.h:142</div></div>
<div class="ttc" id="class_block_lab_html_abcd7367c6f45124d3202c8da5043ac93"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#abcd7367c6f45124d3202c8da5043ac93">BlockLab::NX</a></div><div class="ttdeci">int NX</div><div class="ttdef"><b>Definition:</b> BlockLab.h:43</div></div>
<div class="ttc" id="class_empty_block_lab_html_acc1e6ead590c67446bee384eb3a3ec49"><div class="ttname"><a href="../../db/d11/class_empty_block_lab.html#acc1e6ead590c67446bee384eb3a3ec49">EmptyBlockLab::prepare</a></div><div class="ttdeci">void prepare(Grid&lt; BlockType, allocator &gt; &amp;grid, const int stencil_start[3], const int stencil_end[3])</div><div class="ttdef"><b>Definition:</b> BlockLab.h:326</div></div>
<div class="ttc" id="class_matrix3_d_html_af59a187071d2eaace597398ba649a41d"><div class="ttname"><a href="../../da/d8b/class_matrix3_d.html#af59a187071d2eaace597398ba649a41d">Matrix3D::getSize</a></div><div class="ttdeci">unsigned int * getSize() const </div><div class="ttdef"><b>Definition:</b> Matrix3D.h:167</div></div>
<div class="ttc" id="class_block_lab_html_a669ac139b57be4967e5f43bc649a8520"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#a669ac139b57be4967e5f43bc649a8520">BlockLab::_apply_bc</a></div><div class="ttdeci">virtual void _apply_bc(const BlockInfo &amp;info, const Real t=0)</div><div class="ttdef"><b>Definition:</b> BlockLab.h:49</div></div>
<div class="ttc" id="class_block_lab_html_ad3a1e6e1a1002fb812d6853c8ac1ec9ead9471f6585bd7cf7ddc9edad96e67362"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#ad3a1e6e1a1002fb812d6853c8ac1ec9ead9471f6585bd7cf7ddc9edad96e67362">BlockLab::eMRAGBlockLab_Uninitialized</a></div><div class="ttdef"><b>Definition:</b> BlockLab.h:37</div></div>
<div class="ttc" id="class_block_lab_html_acccfe85f166f20526118fce09b28fb04"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#acccfe85f166f20526118fce09b28fb04">BlockLab::m_refGrid</a></div><div class="ttdeci">const Grid&lt; BlockType, allocator &gt; * m_refGrid</div><div class="ttdef"><b>Definition:</b> BlockLab.h:47</div></div>
<div class="ttc" id="_grid_8h_html"><div class="ttname"><a href="../../d8/dea/_grid_8h.html">Grid.h</a></div></div>
<div class="ttc" id="class_block_lab_html_a5455e54c8e874ee9da6159ea0d1651ed"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#a5455e54c8e874ee9da6159ea0d1651ed">BlockLab::is_yperiodic</a></div><div class="ttdeci">virtual bool is_yperiodic()</div><div class="ttdef"><b>Definition:</b> BlockLab.h:74</div></div>
<div class="ttc" id="_h_d_f5_dumper_8h_html_a445a5f0e2a34c9d97d69a3c2d1957907"><div class="ttname"><a href="../../d2/d27/_h_d_f5_dumper_8h.html#a445a5f0e2a34c9d97d69a3c2d1957907">Real</a></div><div class="ttdeci">double Real</div><div class="ttdef"><b>Definition:</b> HDF5Dumper.h:19</div></div>
<div class="ttc" id="class_block_lab_html_a3e06d4124f7d69923b4ee6345c105cfc"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#a3e06d4124f7d69923b4ee6345c105cfc">BlockLab::read</a></div><div class="ttdeci">const ElementType &amp; read(int ix, int iy=0, int iz=0) const </div><div class="ttdef"><b>Definition:</b> BlockLab.h:287</div></div>
<div class="ttc" id="class_block_lab_html_a0cb8aec5f42c4b1860be8aa218660087"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#a0cb8aec5f42c4b1860be8aa218660087">BlockLab::BlockLab</a></div><div class="ttdeci">BlockLab()</div><div class="ttdef"><b>Definition:</b> BlockLab.h:64</div></div>
<div class="ttc" id="class_block_lab_html_ad3a1e6e1a1002fb812d6853c8ac1ec9ea6c1a64be2e953c6093dab00aab32fe00"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#ad3a1e6e1a1002fb812d6853c8ac1ec9ea6c1a64be2e953c6093dab00aab32fe00">BlockLab::eMRAGBlockLab_Prepared</a></div><div class="ttdef"><b>Definition:</b> BlockLab.h:37</div></div>
<div class="ttc" id="struct_block_info_html_af3655416c17becfb24a9f475a7b97d23"><div class="ttname"><a href="../../d4/ded/struct_block_info.html#af3655416c17becfb24a9f475a7b97d23">BlockInfo::ptrBlock</a></div><div class="ttdeci">void * ptrBlock</div><div class="ttdef"><b>Definition:</b> BlockInfo.h:16</div></div>
<div class="ttc" id="class_empty_block_lab_html"><div class="ttname"><a href="../../db/d11/class_empty_block_lab.html">EmptyBlockLab</a></div><div class="ttdef"><b>Definition:</b> BlockLab.h:314</div></div>
<div class="ttc" id="class_matrix3_d_html_a159420c44012651ebd73d308fc9481c1"><div class="ttname"><a href="../../da/d8b/class_matrix3_d.html#a159420c44012651ebd73d308fc9481c1">Matrix3D::_Setup</a></div><div class="ttdeci">void _Setup(unsigned int nSizeX, unsigned int nSizeY, unsigned int nSizeZ)</div><div class="ttdef"><b>Definition:</b> Matrix3D.h:42</div></div>
<div class="ttc" id="class_block_lab_html_a8ac6690f98ba84346a74b5b95c3afb2b"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#a8ac6690f98ba84346a74b5b95c3afb2b">BlockLab::m_stencilStart</a></div><div class="ttdeci">int m_stencilStart[3]</div><div class="ttdef"><b>Definition:</b> BlockLab.h:42</div></div>
<div class="ttc" id="class_matrix3_d_html_afd365350a07f54220264968e3dade5c0"><div class="ttname"><a href="../../da/d8b/class_matrix3_d.html#afd365350a07f54220264968e3dade5c0">Matrix3D::Access</a></div><div class="ttdeci">DataType &amp; Access(unsigned int ix, unsigned int iy, unsigned int iz) const </div><div class="ttdef"><b>Definition:</b> Matrix3D.h:127</div></div>
<div class="ttc" id="class_block_lab_html_abd79a09ab5b54cf04bfe25c125ea1edf"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#abd79a09ab5b54cf04bfe25c125ea1edf">BlockLab::operator()</a></div><div class="ttdeci">ElementType &amp; operator()(int ix, int iy=0, int iz=0)</div><div class="ttdef"><b>Definition:</b> BlockLab.h:271</div></div>
<div class="ttc" id="class_block_lab_html_ad529f8c851da336419ad63c25ba76429"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#ad529f8c851da336419ad63c25ba76429">BlockLab::prepare</a></div><div class="ttdeci">void prepare(Grid&lt; BlockType, allocator &gt; &amp;grid, int startX, int endX, int startY, int endY, int startZ, int endZ, const bool istensorial)</div><div class="ttdef"><b>Definition:</b> BlockLab.h:91</div></div>
<div class="ttc" id="class_matrix3_d_html"><div class="ttname"><a href="../../da/d8b/class_matrix3_d.html">Matrix3D&lt; ElementType, true, allocator &gt;</a></div></div>
<div class="ttc" id="class_block_lab_html_a4dd07a50f8766b29717b9326e67a9fcd"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#a4dd07a50f8766b29717b9326e67a9fcd">BlockLab::getBuffer</a></div><div class="ttdeci">ElementType * getBuffer() const </div><div class="ttdef"><b>Definition:</b> BlockLab.h:89</div></div>
<div class="ttc" id="class_block_lab_html_a0e11603d73ab4923e1d9033edccdb572"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#a0e11603d73ab4923e1d9033edccdb572">BlockLab::m_state</a></div><div class="ttdeci">eBlockLab_State m_state</div><div class="ttdef"><b>Definition:</b> BlockLab.h:39</div></div>
<div class="ttc" id="class_grid_html_ae2014bfbb3953437effb08202e7cd482"><div class="ttname"><a href="../../da/d74/class_grid.html#ae2014bfbb3953437effb08202e7cd482">Grid::avail</a></div><div class="ttdeci">virtual bool avail(unsigned int ix, unsigned int iy=0, unsigned int iz=0) const </div><div class="ttdef"><b>Definition:</b> Grid.h:109</div></div>
<div class="ttc" id="class_grid_html_a68154c3137ad02f44a24d2d75d807fe6"><div class="ttname"><a href="../../da/d74/class_grid.html#a68154c3137ad02f44a24d2d75d807fe6">Grid::getBlocksPerDimension</a></div><div class="ttdeci">virtual int getBlocksPerDimension(int idim) const </div><div class="ttdef"><b>Definition:</b> Grid.h:95</div></div>
<div class="ttc" id="class_block_lab_html_aefd27fed8fbb1d3d60fe1457ae90f248"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#aefd27fed8fbb1d3d60fe1457ae90f248">BlockLab::load</a></div><div class="ttdeci">void load(const BlockInfo &amp;info, const Real t=0, const bool applybc=true)</div><div class="ttdef"><b>Definition:</b> BlockLab.h:167</div></div>
<div class="ttc" id="class_grid_html"><div class="ttname"><a href="../../da/d74/class_grid.html">Grid&lt; BlockType, allocator &gt;</a></div></div>
<div class="ttc" id="class_block_lab_html"><div class="ttname"><a href="../../d7/d95/class_block_lab.html">BlockLab</a></div><div class="ttdef"><b>Definition:</b> BlockLab.h:25</div></div>
<div class="ttc" id="class_block_lab_html_accdcd2d5e815a8497e5ef9ae884da6b6"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#accdcd2d5e815a8497e5ef9ae884da6b6">BlockLab::ElementType</a></div><div class="ttdeci">ElementTypeT ElementType</div><div class="ttdef"><b>Definition:</b> BlockLab.h:32</div></div>
<div class="ttc" id="class_block_lab_html_ab23c907953858c8b393a9910ecf5b1cf"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#ab23c907953858c8b393a9910ecf5b1cf">BlockLab::_release</a></div><div class="ttdeci">void _release(T *&amp;t)</div><div class="ttdef"><b>Definition:</b> BlockLab.h:52</div></div>
<div class="ttc" id="class_block_lab_html_ade306bb6935a0ead765444534c2e05db"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#ade306bb6935a0ead765444534c2e05db">BlockLab::istensorial</a></div><div class="ttdeci">bool istensorial</div><div class="ttdef"><b>Definition:</b> BlockLab.h:45</div></div>
<div class="ttc" id="class_block_lab_html_a083218471f59c32fccc335759734667d"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#a083218471f59c32fccc335759734667d">BlockLab::~BlockLab</a></div><div class="ttdeci">~BlockLab()</div><div class="ttdef"><b>Definition:</b> BlockLab.h:77</div></div>
<div class="ttc" id="class_block_lab_html_ad547d74881a0d226a849e2051af6b26b"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#ad547d74881a0d226a849e2051af6b26b">BlockLab::ElementTypeBlock</a></div><div class="ttdeci">BlockType::ElementType ElementTypeBlock</div><div class="ttdef"><b>Definition:</b> BlockLab.h:36</div></div>
<div class="ttc" id="class_block_lab_html_aa45e40066bececd40de75c238c346e79"><div class="ttname"><a href="../../d7/d95/class_block_lab.html#aa45e40066bececd40de75c238c346e79">BlockLab::getActualSize</a></div><div class="ttdeci">int getActualSize() const </div><div class="ttdef"><b>Definition:</b> BlockLab.h:83</div></div>
<div class="ttc" id="class_empty_block_lab_html_a090310d2af6fb159b6fe949413cbd47a"><div class="ttname"><a href="../../db/d11/class_empty_block_lab.html#a090310d2af6fb159b6fe949413cbd47a">EmptyBlockLab::ElementType</a></div><div class="ttdeci">ElementTypeT ElementType</div><div class="ttdef"><b>Definition:</b> BlockLab.h:325</div></div>
<div class="ttc" id="struct_block_info_html_ad32832aaa2dee35464a74abfae741572"><div class="ttname"><a href="../../d4/ded/struct_block_info.html#ad32832aaa2dee35464a74abfae741572">BlockInfo::index</a></div><div class="ttdeci">int index[3]</div><div class="ttdef"><b>Definition:</b> BlockInfo.h:17</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_a96298b6e4e31b6d79cda3fbdda75cb7.html">Cubism</a></li><li class="navelem"><a class="el" href="../../dc/d70/_block_lab_8h.html">BlockLab.h</a></li>
    <li class="footer">Generated on Mon Mar 23 2015 17:33:05 for CubismUP_2D by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
